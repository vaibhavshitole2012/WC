Backup OOTB:

1. Stop Windchill.
2. Take LDIF export from Directory Server (DS_OOTB_export.ldif) - Not required
3. Stop Windchill Directory Server
4. Stop Apache
5. Clear all cache (logs,tomcat instances,compiled tasks)
6. Open WC Shell:
	a. login with sqlplus system/manager@wind
	b. Run below commands:

	create or replace directory expdp_dr as 'D:\DB_OOTB_bckp';
	grant  read, write on directory expdp_dr to pdmlink_app;
	commit;
	exit;
	c. Run export command:
	expdp system/wcadmin@wind3 SCHEMAS=wcadmin DIRECTORY=expdp_dr DUMPFILE=DB_BUILD_export.dmp logfile=DB_BUILD_export.log EXCLUDE=STATISTICS

7. Stop OracleOraDB19Home1TNSListener service - Not required
8. Stop OracleServiceWIND service - Not required
9. Dont take backup of ocu folder

Take back up such a way you will always work on the initial set up.. That is where your ocu folder is present.
10. Run below ROBOCOPY commands from cmd (open as admin)


ROBOCOPY "D:\ptc\Windchill_12.0\HTTPServer" "D:\ptc_bckp\Windchill_12.0\HTTPServer" /E /XD
ROBOCOPY "D:\ptc\Windchill_12.0\PSI" "D:\ptc_bckp\Windchill_12.0\PSI" /E /XD
ROBOCOPY "D:\ptc\Windchill_12.0\PSI_11.2" "D:\ptc_bckp\Windchill_12.0\PSI_11.2" /E /XD
ROBOCOPY "D:\ptc\Windchill_12.0\WindchillDS" "D:\ptc_bckp\Windchill_12.0\WindchillDS" /E /XD
ROBOCOPY "D:\ptc\Windchill_12.0\Windchill" "D:\ptc_bckp\Windchill_12.0\Windchill" /E /XD

ROBOCOPY "D:\ptc\Windchill_12.0\HTTPServer" "D:\ptc_cognos_cps3_initialBuild\Windchill_12.0\HTTPServer" /E /X
ROBOCOPY "D:\ptc\Windchill_12.0\PSI" "D:\ptc_cognos_cps3_initialBuild\Windchill_12.0\PSI" /E /X

ROBOCOPY "D:\ptc\Windchill_12.0\WindchillDS" "D:\ptc_cognos_cps3_initialBuild\Windchill_12.0\WindchillDS" /E /X
ROBOCOPY "D:\ptc\Windchill_12.0\Windchill" "D:\ptc_cognos_cps3_initialBuild\Windchill_12.0\Windchill" /E /X

10. Take one more backup of OOTB using below:
ROBOCOPY "D:\ptc_bckp" "D:\ptc_bckp_02" /E /XD

----------------------------------------------------------------------------------------------------------------

Restore OOTB:

1. Stop Windchill.
2. Stop Windchill Directory Server
3. Stop Apache
4. Open WC Shell:
	a. login with sqlplus system/manager@wind
	b. Run below commands:

	drop user wcadmin cascade;
	@D:\ptc\Windchill_12.0\Windchill\db\sql\create_user.sql;
	give below values when prompted:
	wcadmin
	TEMP
	USERS

	alter user wcadmin identified by wcadmin;
	alter user cust_app identified by cust_app;

	create or replace directory impdp_dr as 'D:\dbDUMPWC_cognos_cps3';
	create or replace directory impdp_dr as 'D:\dump';
	grant read, write on directory impdp_dr to wcadmin;
	commit;
	exit

	c. Run import command:
	impdp system/wcadmin@wind1202 schemas=wcadmin directory=impdp_dr dumpfile=DB_WCCOGCPS3_EXPORT.dmp logfile=DB_WCCOGCPS3_EXPORT_Jan25.log
	impdp system/wcadmin schemas=wcadmin directory=impdp_dr dumpfile=WINDCHILL_12.dmp logfile=DB_WCCOGCPS3_EXPORT_March15.log

	d. login with sqlplus wcadmin/wcadmin@wind3
	e. Run below commands:

	alter package BASELINEPK compile body;
	commit;
	alter package EPMWORKSPACEPK compile body;
	commit;
	exit;
5. Start Windchill Directory Server
6. Start Apache
7. Start Windchill

after the Revert .. Check if Windchill is coming up by doing Windchill start

If Windchill is not coming up , try to follow MS logs and resolve the issue 


Log4j fix is very important
Fix the log 4j issue fix .. as per ptc Documents......
https://www.ptc.com/en/support/article/CS358789?language=en&posno=1&q=ie3rdpartylibs&Release=12.0&source=search

If Windchill is coming up , go to D:\GIT\<Latest_4.5.x_Branch> (Dev Branch)

in Dev Branch go to srclib ==> Make sure the cdt.project.properties having below values 

cd --> D:\GIT\CnCM_upgrade\srclib

if windchill is up ==> import the licence 

===============================================================================================
# Dev Properties for eclipse
#WT_HOME=D\:\\ptc\\Windchill_11.1\\Windchill
#JAVA_HOME=D\:\\ptc\\Windchill_11.1\\Java
#ANT_HOME=D\:\\ptc\\Windchill_11.1\\Windchill
#oracle_home=D\:\\ptc\\Oracle\\product\\12.2.0\\dbhome_1
#wtdev=E\:\\release_3.8\\DevBranch

######### Tool Specific properties #####################
cdt.application.name=C & CM Deployment Tool
dist.name=cplm.jar
name.version=philips_3_8
executionDirectory=D:\\builds\\
userInstallType=OOTB
useAsDefaultUsername=wcadmin
useAsDefaultPassword=wcadmin
dist.dir=D\:\\builds
wt.method.maxHeap=2048
generateSourcePackage=true
MODE=dist
ignoreDBErrorCodes=ORA-00942,ORA-00955,ORA-01408
dbType=Oracle
deploymentFile=Deployment_Dev.xml
ldap.protocol=ldap
ldap.port=389
#Below property is used in compile.xml only
executeUpgradeScheme=false
executeUpgradeManager=false
runFullMakeJar=true
sererRestart=true
updateDTD=false
deleteTempDir=true
#Navigate Deployment
importerEndpoint=http://localhost:8282/Thingworx/Importe
twxUsername=Administrator
twxPassword=xxxxxxxxxxxxx
######## Validation
disableJavaScriptValidation=true
## Added for Retry Load file  
retryIntervalInMinutes=1
#DS and apache service check
disableDSAndApacheServicecheck=true

######### Build Specific properties #####################
custom.ufid=Ldap.cts.com
qlikview.password=test
custom.authenticationService.ufid=null
cust_app.username=cust_app
cust_app.password=cust_app
dellBoomi.username=GenericUser
dellBoomi.password=GenericPass
pdh.esitarget.endpoint.url=https://dev.apipil.philips.com/ws/rest/v1/WCToBoomi/cPLM_EUMDR_Windchill_PDH
esb.username=WT_User_001
esb.password=Philips!234
esitarget.endpoint.url=https://dev.b2bgw.philips.com/esb/SharePartRecordToEnterprise
executeWFValidatorTool=false
NoOfthreads=8
ldapPass=wcadmin
# Change below properties to develop, acceptance, test or production
# Ddepending on cPLM environment type, defaulted to develop
cplm.envType=develop
# Properties for Cognos CXDR Report Configuration
cognos_app.username=cognos_app
cognos_app.password=cognos_app
## Added for ERP BOM
dellboomi.erpbom.username=GenericUser
dellboomi.erpbom.password=GenericPass
dellboomi.erpbom.endpoint.url=https://tst.apipil.philips.com/ws/rest/v1/WC_SAP/MAXBOM/
dellboomi.erpbom.systemid=06
######## Modification for US1018227 ##########
AthenaChatBotUrl=http://acc.inside.athena.philips.com/
===============================================================================================================================

run dist ==> check if the errors are there

Java -jar cdt_1.0.1.jar mode=dist

if errors are found ==> resolve it based on the error Type

no errors --> run dist and install as below
Java -jar cdt_1.0.1.jar mode=distandinstall


post this try to do windchill start , if windchill is up its good 

if windchill is down check the logs and resolve the issue and start windchill (generally windchill will be up post dist and install)


Post importing licence create few data ., Check if it is working with specified user Login.. 

======= Then ========

delete the "Supplier Administrator" ACL from Healthtech Default and Philips Default - policy administration

go to participant administration from philips organization utility - participant --> remove that "Supplier Administrator" user - delete from windchill and directory server - && - perge participant admin

then run reloadOrganizationTemplate.xml which is in extention , (make sure reloadOrganizationTemplate.xml is having only below entries)

<loadFromFile file="loadXMLFiles\com\philips\cplm\templates\organization\PhilipsOrgTemplateForOOTB.xml" username="${useAsDefaultUsername}" password="${useAsDefaultPassword}" containerPath="/wt.inf.container.OrgContainer=HealthTech"/>
		
		
		<verifyACL username="${useAsDefaultUsername}" password="${useAsDefaultPassword}" containerDomain="HealthTech/Default" xmlFilesPath="loadXMLFiles\accessrules\orgContainerRules.xml;loadXMLFiles\accessrules\packageRules.xml;loadXMLFiles\accessrules\receivedDeliveryRules.xml;loadXMLFiles\com\philips\cplm\accessrules\configurableLinkOrgACL.xml;loadXMLFiles\com\philips\cplm\accessrules\PhilipsNewOrgACL.xml;loadXMLFiles\com\philips\cplm\accessrules\PhilipsRestructuredTypesACL.xml;loadXMLFiles\com\philips\cplm\accessrules\ootbOrgACL.xml;loadFiles\com\philips\cplm\rules\Philips_BOA_ACL.xml;loadFiles\com\philips\cplm\rules\PhilipsManagedBaseline_ACLs.xml;loadFiles\com\philips\cplm\organization\contexts\HealthTech\04_HealthTech_FullOrgAdmin_ACL.xml;loadFiles\com\philips\cplm\organization\contexts\HealthTech\05_HealthTech_ORG_ACL.xml;loadFiles\com\philips\cplm\rules\Philips_ESIAuthors_Org_ACLs.xml;loadFiles\com\philips\cplm\rules\Philips_MasterAttributeHistoryPart_ACLs.xml;loadFiles\com\philips\cplm\rules\Philips_Procurement_Administrator_ACL.xml;loadFiles\com\philips\cplm\rules\Philips_Supplier_Administrator_Read_Rule.xml"/>
		
===========================================================


=========================================================

After this we need to run Demo data build ==> in the similar way ==> 


=========================================================


There might be a frequent reinstallation required if the Build is not stable ==

So Taking Backups is very important 

Backup needs to be taken at every steps like 
	1. OOTB
	2. If we are installing Cognos, post Cognos installation
	3. Post Build


========================================================

For Eclipse issue

To remove compilation issue 


paste this file from \\10.154.203.170\CPS Bundle\Windchill_12.0.2.0\Create_New_WC_Jar.xml

D:\ptc\Windchill_12.0\Windchill\Create_New_WC_Jar.xml

and run 

ant -f Create_New_WC_Jar.xml createJar
